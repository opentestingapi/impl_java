# JDBC

Using SQL to perform inject and check

### Configuration Inject

* please use sourcefile to store Insert/Update/Delete to execute
* random data replacement processed for 'sourcefile'

```
{
        "injectid": "inject-oracle-1",
        "cron": [ "2 * * * * ?" , "13 * * * * ?", "23 * * * * ?", "34 * * * * ?", "43 * * * * ?", "53 * * * * ?" ],
        "active": true,
        "service": {
            "type": "oracle",
            "connectstring": "jdbc:oracle:thin:@localhost:1521/XE",
            "username": "e2etest",
            "password": "e2etest"
        },       
        "sourcefile": "source_oracle_1.sql",
        "timetolive": "5d",
        "checks": [ "check-oracle-1" ],
        "replacements": [...]
}
```

### Configuration Check

* please use validation 'request' to define select to execute (sql file)
* please use a select statement that returns **json** data, only the first row and column are read      
    - Oracle example: ``select json_object('test' VALUE test) from table``  
    - Postgresql example: ``select row_to_json(table) from table``  
* please use validation 'response' to define expected JSON result(s)
* expectedtype could be 'equals', 'contains', 'containsnot', 'containsoneof'
* random data replacement processed for: 'request', 'response'
* injects executed after successful check (please do not create infinite loops)
* please use dataextraction to transfer JSON result (only JSON!) attributes to random data for later usage

```
{
        "checkid": "check-oracle-1",  
        "active": true,
        "service": {
            "type": "jdbc",
            "connectstring": "jdbc:oracle:thin:@localhost:1521/XE",
            "username": "e2etest",
            "password": "e2etest"
         },
         "validations": [
            {
                "order": 1,
                "request": "check_oracle_param_1.sql",
                "response": [ "check_oracle_1.json" ],
                "type": "equals"
            }
        ],
        "maxwaittime": "10m",
        "mandatory": false,
        "injects": [ "inject-rest-1" ],
        "checks": [ "check-rest-1" ],
        "dataextraction": [ 
            {
                "attribute": "test",
                "source": "payload",
                "target": "#check-oracle-1.test#",
                "regex": ".*test"
            }
        ]
}
```

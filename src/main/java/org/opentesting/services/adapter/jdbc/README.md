# JDBC

Using SQL to perform inject and check

### Configuration Inject

* please use sourcefile to store Insert/Update/Delete to execute
* random data replacement processed for: sourcefile

```
{
        "injectid" : "inject-oracle-1",
        "triggercron" : [ "* 1 * * * ?" ],
        "activation" : true,
        "service" : "jdbc",
        "sourcefile" : "source_oracle_1.sql",
        "connectstring" : "jdbc:oracle:thin:@localhost:1521/XE",
        "connectuser" : "user",
        "connectpassword" : "password",
        "timetolive": "5d",
        "checks" : [ "check-oracle-1", "check-kafka-1" ],
        "randomgenerator" : {
          "replacements": [
               {
                   "replacement" : "#replaceme1#",
                   "optionlist": [ "rep11", "rep12", "rep13"]
               }, {
                   "replacement" : "#replaceme2#",
                   "optionlist": [ "rep21", "rep22", "rep23", "rep24"]
               }
          ]
        }
}
```

### Configuration Check

* please use serviceparam to define select to execute (Parameter sql)
* please use a select statement that returns **json** data, only the first row and column are read      
    - Oracle example: ``select json_object('test' VALUE test) from table``  
    - Postgresql example: ``select row_to_json(table) from table``  
* please use expectedfile to define expected JSON result 
* expectedtype could be 'equals' or 'contains'
* random data replacement processed for: serviceparam, expectedfile
* injects executed after successful check (please do not create infinite loops)
* please use result2random to transfer JSON result (only JSON!) attributes to random data for later usage

```
{
        "checkid" : "check-oracle-1",
        "activation" : true,
        "service" : "jdbc",
        "serviceparam" : "sql=check_oracle_param_1.sql",
        "expectedfile" : "check_oracle_1.json",
        "expectedtype": "equals",
        "connectstring" : "jdbc:oracle:thin:@localhost:1521/XE",
        "connectuser" : "user",
        "connectpassword" : "password",
        "maxwaittime" : "1h",
        "mandatory" : true,
        "injects" : [ "check-kafka-1", "check-oracle-1" ],
        "result2random" : [ "attribute1", "attribute2" ]
}
```

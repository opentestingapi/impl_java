# Cassandra

Using CQL to perform inject and check

### Configuration Inject

* please use sourcefile to store Insert/Update/Delete to execute
* please use tablenames with keyspaces **keyspace.tablename**
* random data replacement processed for: sourcefile

```
{
        "injectid" : "inject-cassandra-1",
        "triggercron" : [ "* 1 * * * ?" ],
        "activation" : true,
        "service" : "cassandra",
        "sourcefile" : "source_cassandra_1.cql",
        "connectstring" : "cassandra-db:9042",
        "connectuser" : "user",
        "connectpassword" : "password",
        "timetolive": "5d",
        "checks" : [ "check-kafka-1", "check-oracle-1" ],
        "randomgenerator" : {
          "replacements": [
               {
                   "replacement" : "#replaceme1#",
                   "optionlist": [ "rep11", "rep12", "rep13"]
               }, {
                   "replacement" : "#replaceme2#",
                   "optionlist": [ "rep21", "rep22", "rep23", "rep24"]
               }
          ]
        }
}
```

### Configuration Check

* please use serviceparam to define select to execute (Parameter cql)
* please use "select **json** * from table", we read only first rown and column from ResultSet
* please use expectedfile to define expected JSON result
* expectedtype could be 'equals' or 'contains'
* random data replacement processed for: serviceparam, expectedfile
* injects executed after successful check (please do not create infinite loops)
* please use result2random to transfer JSON result (only JSON!) attributes to random data for later usage

```
{
        "checkid" : "check-cassandra-1",
        "activation" : true,
        "service" : "cassandra",
        "serviceparam" : "cql=check_cassandra_param_1.cql",
        "expectedfile" : "check_cassandra_1.json",
        "expectedtype": "equals",
        "connectstring" : "cassandra-db:9042",
        "connectuser" : "user",
        "connectpassword" : "password",
        "maxwaittime" : "1h",
        "mandatory" : true,
        "injects" : [ "check-kafka-1", "check-oracle-1" ],
        "result2random" : [ "attribute1", "attribute2" ]
}
```
# Cassandra

Using CQL to perform inject and check

### Configuration Inject

* please use sourcefile to store Insert/Update/Delete to execute
* please use tablenames with keyspaces **keyspace.tablename**
* random data replacement processed for 'sourcefile'

```
        "injectid": "inject-cassandra-1",
        "cron": [ "1 * * * * ?" , "11 * * * * ?", "22 * * * * ?", "30 * * * * ?", "41 * * * * ?", "52 * * * * ?" ],
        "active": true,
        "service": {
            "type": "cassandra",
            "connectstring": "localhost:9042",
            "username": "e2etest",
            "password": "e2etest"            
         },      
        "sourcefile": "source_cassandra_1.cql",
        "timetolive": "5d",
        "checks": [ "check-cassandra-1", "check-to-fail-cassandra-2" ],
        "replacements": [ ... ]
```

### Configuration Check

* please use validation 'request' to define select to execute (cql file)
* please use "select **json** * from table", we read only first rown and column from ResultSet
* please use validation 'response' to define expected JSON result(s)
* expectedtype could be 'equals', 'contains', 'containsnot', 'containsoneof'
* random data replacement processed for: 'request', 'response'
* injects executed after successful check (please do not create infinite loops)
* please use dataextraction to transfer JSON result (only JSON!) attributes to random data for later usage

```
{
        "checkid": "check-cassandra-1",
        "active": true,
        "service": {
            "type": "cassandra",
            "connectstring": "localhost:9042",
            "username": "e2etest",
            "password": "e2etest"
         },
         "validations": [
            {
               "order": 1,
               "request": "check_cassandra_param_1.cql",
               "response": [ "check_cassandra_1.json" ],
               "type": "equals"
            }
         ],
        "maxwaittime": "1m",
        "mandatory": true,
        "injects": [ "inject-rest-1" ],
        "checks": [ "check-rest-1" ],
        "dataextraction": [ 
            {
               "attribute": "test",
               "source": "payload",
               "target": "#check-cassandra-1.test#",
               "regex": ".*test"
            }
         ]
}
```
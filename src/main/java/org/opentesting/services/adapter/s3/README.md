# S3

Using API to insert/check data to/from S3

### Configuration Inject

* please use sourcefile to store content to upload
* please use username for accessKey and password for secretAccessKey
* random data replacement processed for 'bucketName', 'fileName' (target name in S3), 'sourcefile' content

```
{
        "injectid": "inject-s3-1",
        "cron": [ "2 * * * * ?" , "13 * * * * ?", "23 * * * * ?", "34 * * * * ?", "43 * * * * ?", "53 * * * * ?" ],
        "active": true,
        "service": {
            "type": "s3",
            "connectstring": "s3-serviceEndpoint",
            "username": "myaccesskey",
            "password": "mysecretaccesskey",
            "custom": [
               {
                  "key": "region",
                  "value": "myregion"
               },               
               {
                  "key": "bucketName",
                  "value": "mybucketname"
               },
               {
                  "key": "fileName",
                  "value": "myfilename"
               }
            ]
        },       
        "sourcefile": "source_s3_1.json",
        "timetolive": "5d",
        "checks": [ "check-s3-1" ],
        "replacements": [...]
}
```

### Configuration Check

* please use username for accessKey and password for secretAccessKey
* please use validation 'response' to define expected JSON result(s)
* expectedtype could be 'equals', 'contains', 'containsnot', 'containsoneof'
* random data replacement processed for: 'bucketName', 'fileName' (target name from S3), 'response' (content)
* injects executed after successful check or if check finally failed and not mandatory (please do not create infinite loops)
* please use dataextraction to transfer JSON result (only JSON!) attributes to random data for later usage

```
{
        "checkid": "check-s3-1",  
        "active": true,
        "service": {
            "type": "jdbc",
            "connectstring": "s3-serviceEndpoint",
            "username": "myaccesskey",
            "password": "mysecretaccesskey",
            "custom": [
               {
                  "key": "region",
                  "value": "myregion"
               },
               {
                  "key": "bucketName",
                  "value": "mybucketname"
               },
               {
                  "key": "fileName",
                  "value": "myfilename"
               }
            ]
         },
         "validations": [
         {
            "order": 1,
            "request": "",
            "response": [ "check_s3_1.json" ],
            "type": "equals"
         }],
        "maxwaittime": "10m",
        "mandatory": false,
        "injects": [ "inject-rest-1" ],
        "checks": [ "check-rest-1" ],
        "dataextraction": [ 
            {
               "attribute": "test",
               "source": "payload",
               "target": "#check-s3-1.test#"
            }
         ]
}
```

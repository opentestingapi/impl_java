package org.opentesting;

import java.time.LocalDateTime;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.UUID;

import org.opentesting.dto.TestCaseCheckDTO;
import org.opentesting.dto.TestCaseDTO;
import org.opentesting.dto.TestCaseInjectionDTO;
import org.opentesting.dto.TestCaseRandomDataDTO;
import org.opentesting.dto.TestCaseRandomGeneratorDTO;
import org.opentesting.dto.TestCaseReplacementDTO;

/**
 * generate data for tests
 */
public class TestDataGenerator {

    protected TestCaseDTO createEmptyTest() {
        TestCaseDTO tc = new TestCaseDTO("test", true, "testdesc", List.of("bar", "foo"), null, null);
        return tc;
    }

    protected TestCaseInjectionDTO createInject() {

        String timerid = "12345";        
        List<TestCaseReplacementDTO> replacements = new ArrayList<TestCaseReplacementDTO>();
        TestCaseReplacementDTO rg = new TestCaseReplacementDTO("#hallo#", List.of("a", "b"), false, "", 0, "", "1s", true, 6);
        replacements.add(rg);

        TestCaseInjectionDTO inject = new TestCaseInjectionDTO("inject1", List.of("10 * * * * * ?"), false, "rest",
                null, "source.json", "connect:666", "connectuser", "connectpassword", "jmsuser", "jmspassword", "1d",
                List.of("check1"), new TestCaseRandomGeneratorDTO(null, replacements), timerid, LocalDateTime.now());

        return inject;
    }

    protected TestCaseCheckDTO createCheck(String mycheckid) {
        String testid = "testid";	
		String checkid = mycheckid+"_123456789";
		Map<String, String> randomdata = new HashMap<String, String>();
		randomdata.put("#hallo#", "Hallo Welt!");

		TestCaseCheckDTO check = new TestCaseCheckDTO(checkid, true, "dummyservice", "expected.json", "equals", "1h", true, 
        		"serviceparam.json", "POST connectstring", "connectuser", "connectpassword", "jmsuser", "jmspassword",
                List.of("dummy-inject-1"), List.of("dummy-check-1"), List.of("attribute1"),
				null, null, null, testid, null, new TestCaseRandomDataDTO(randomdata), UUID.randomUUID().toString(), "TRACEID");

        return check;
    }

}

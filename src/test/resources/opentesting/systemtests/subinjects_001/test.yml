id: subinjects_001
testapi: '1.4'
active: true
description: subinjects test case
labels:
  - stage-local
  - department-mydepartment
  - function-myfunction
injections:
  - injectid: inject-rest-1
    cron: [ ]
    active: true
    service:
      type: rest
      connectstring: 'http://host.testcontainers.internal:50000/dummy/post'
      username: ''
      password: ''
      custom:
        - key: type
          value: POST
        - key: header
          value: source_rest_headers_1.json
        - key: senddelay
          value: 5000
    sourcefile: source_rest_1.json
    timetolive: 3m
    checks:
      - check-rest-1
    injections:
      - inject-rest-2
      - inject-rest-2
    replacements:
      - key: "#RANDOMVALUE#"
        value:
          - order: 1
            type: list
            value: "a|b|c"
          - order: 2
            type: list
            value: "1|2|3"
  - injectid: inject-rest-2
    cron: []
    active: true
    service:
      type: rest
      connectstring: 'http://host.testcontainers.internal:50000/dummy/post'
      username: ''
      password: ''
      custom:
        - key: type
          value: POST
        - key: header
          value: source_rest_headers_1.json
    sourcefile: source_rest_1.json
    timetolive: 3m
    checks:
      - check-rest-2
checks:
  - checkid: check-rest-1
    active: true
    service:
      type: rest
      connectstring: 'http://host.testcontainers.internal:50000/dummy/get'
      username: ''
      password: ''
      custom:
        - key: type
          value: GET
        - key: header
          value: check_rest_headers_1.json
    validations:
      - order: 1
        request: ''
        response:
          - check_rest_1.json
        type: equals
    maxwaittime: 10s
    intervall: 5s
    mandatory: true
  - checkid: check-rest-2
    active: true
    service:
      type: rest
      connectstring: 'http://host.testcontainers.internal:50000/dummy/post'
      username: ''
      password: ''
      custom:
        - key: type
          value: POST
        - key: header
          value: check_rest_headers_1.json
    validations:
      - order: 1
        request: check_rest_param1.json
        response:
          - check_rest_2.json
        type: equals
    maxwaittime: 10s
    intervall: 5s
    mandatory: true

id: inheritfrom_001
testapi: '1.5'
active: true
description: inheritfrom test case
labels:
  - stage-local
  - department-mydepartment
  - function-myfunction
injections:
  - injectid: inject-rest-1
    cron: [ ]
    active: true
    service:
      type: rest
      connectstring: 'http://host.testcontainers.internal:50000/dummy/post'
      username: ''
      password: ''
      custom:
        - key: type
          value: POST
        - key: header
          value: source_rest_headers_1.json
        - key: senddelay
          value: 5000
    sourcefile: source_rest_1.json
    timetolive: 3m
    injections:
      - inject-rest-2
    replacements:
      - key: "#RANDOMVALUE#"
        value:
          - order: 1
            type: list
            value: "99.99"
  - injectid: inject-rest-2
    cron: []
    active: true
    service:
      type: rest
      connectstring: 'http://host.testcontainers.internal:50000/dummy/post'
      username: ''
      password: ''
      custom:
        - key: type
          value: POST
        - key: header
          value: source_rest_headers_1.json
    sourcefile: source_rest_1.json
    timetolive: 3m
    replacements:
      - key: "#RANDOMVALUE2#"
        value:
          - order: 1
            type: inheritfrom
            value: "inject-rest-1"
            param: "#RANDOMVALUE#"
      - key: "#RANDOMVALUE3#"
        value:
          - order: 1
            type: addition
            value: "#RANDOMVALUE2#"
            param: "-10"
    checks:
      - check-postgre-1
checks:
  - checkid: check-postgre-1
    active: true
    service:
      type: jdbc
      connectstring: "jdbc:postgresql://host.testcontainers.internal:5432/postgres"
      username: e2etest
      password: e2etest
    validations:
      - order: 1
        request: check_postgresql_param_1.sql
        response:
          - check_postgresql_1.json
        type: equals
    maxwaittime: 10s
    intervall: 5s
    mandatory: true
